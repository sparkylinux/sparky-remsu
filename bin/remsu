#!/bin/bash

# This script has been oryginally created by Tony "Fragadelic" Brijeski
# as a part of Remastersys tool.
# Copyright 2007-2012 Under the GNU GPL2 License
#
# Separately debianized for SparkyLinux by Pawe≈Ç "pavroo' Pijanowski
# Copyright 2012-2017 under the GNU GPL2 License
# Last update 2017/12/04

#testmode=`grep "1000" /etc/passwd | grep -v "Live"`

#if [ "$testmode" = "" ] && [ $(pidof kwin) ] || [ $(pidof kwin_x11) ] && [ -f /usr/bin/kdesudo ]; then
#	kdesudo "$@"
#elif [ "$testmode" = "" ] && [ -f /usr/bin/gksudo ]; then
#	gksudo "$@"
#else
#	if [ $(pidof kwin) ] || [ $(pidof kwin_x11) ] && [ -f /usr/bin/kdesudo ]; then
#		kdesudo "$@"
#	elif [ $(pidof twin) ] && [ -f /usr/bin/kdesudo ]; then
#		kdesudo "$@"
#	else
#		gksu "$@"
#	fi
#fi

# kde
if [ $(pidof kwin) ] || [ $(pidof kwin_x11) ]; then
	if [ -f /usr/bin/kdesudo ]; then
		kdesudo "$@"
	elif [ -f /usr/bin/gksudo ]; then
		gksudo "$@"
	fi
# tde
elif [ $(pidof twin) ] && [ -f /usr/bin/kdesudo ]; then
	kdesudo "$@"

# openbox
elif [ $(pidof openbox) ] && [ -f /usr/bin/obmenu-generator ]; then
	gksudo "$@"

# lxqt
elif [ $(pidof openbox) ] && [ -f /usr/bin/startlxqt ]; then
	if [ -f /usr/bin/lxqt-sudo ]; then
		lxqt-sudo "$@"
	fi

# others
else
	gksudo "$@"
fi

exit 0
